---
layout: post
title: My Blog 1
---

## 1. Create a Database

Let's first import all the packages we need, and create a database.


```python
# import relevant packages
import pandas as pd
import sqlite3
import numpy as np
# create a database in current directory called temps.db
conn = sqlite3.connect("temps.db") 
```

We will then define a helper function called prepare_df() that will get the temperature dataframe into the desired shape.


```python
# define a function to reorganize the temperature dataframe
def prepare_df(df):
    """
    This function takes in the temperature dataframe, stacks the columns by ID and Year, 
    renames the columns, converts Month into integers, and divides Temperature by 100.
    """
    df = df.set_index(keys=["ID", "Year"])
    df = df.stack()
    df = df.reset_index()
    df = df.rename(columns = {"level_2"  : "Month" , 0 : "Temp"})
    df["Month"] = df["Month"].str[5:].astype(int)
    df["Temp"]  = df["Temp"] / 100
    return(df)
```

We will then write the 3 tables into the database.


```python
# write the temperature table to the database
temps_iter = pd.read_csv("temps.csv", chunksize = 100000)
for temps in temps_iter:
    temps = prepare_df(temps)
    temps.to_sql("temperatures", conn, if_exists = "append", index = False)
```


```python
# write the station metadata to the database
url = "https://raw.githubusercontent.com/PhilChodrow/PIC16B/master/datasets/noaa-ghcn/station-metadata.csv"
stations = pd.read_csv(url)
stations.to_sql("stations", conn, if_exists = "replace", index = False)
```


```python
# write the country codes to the database
url = "https://raw.githubusercontent.com/mysociety/gaze/master/data/fips-10-4-to-iso-country-codes.csv"
countries = pd.read_csv(url)
countries.to_sql("countries", conn, if_exists = "replace", index = False)
```

    /opt/anaconda3/envs/PIC16B/lib/python3.7/site-packages/pandas/core/generic.py:2882: UserWarning: The spaces in these column names will not be changed. In pandas versions < 0.14, spaces were converted to underscores.
      method=method,


Just to make sure we have all 3 tables in the database.


```python
# check that we indeed have 3 tables in the database
cursor = conn.cursor()
cursor.execute("SELECT name FROM sqlite_master WHERE type='table'")
print(cursor.fetchall())
```

    [('temperatures',), ('stations',), ('countries',)]



```python
# close the database connection
conn.close()
```

## 2. Write a Query Function

We will create a function called query_climate_database() that allows us to get temperature readings for a specified country, in the specified date range, in the specified month of the year.


```python
# define a function called query_climate_database()
def query_climate_database(country, year_begin, year_end, month):
    """ 
    This function takes in the name of a country, the starting year, the ending year, and a month.
    It returns a Pandas dataframe of temperature readings for the specified country, 
    in the specified date range, in the specified month of the year.
    """
    # connect to the database
    conn = sqlite3.connect("temps.db") 
    cursor = conn.cursor()
    # find country code
    cursor.execute("SELECT `fips 10-4` FROM countries WHERE name='" + country + "';")
    code = cursor.fetchall()
    
    # specify searching conditions: 
    # 1) ID starts with the country code; 
    # 2) month = month in input; 
    # 3) year is between year_begin and year_end
    cond = ("S.id LIKE '" + code[0][0] + "%'" + 
        " AND T.month=" + str(month) + 
        " AND T.year BETWEEN " + str(year_begin) + 
        " AND " + str(year_end))
    
    # selecting + merging
    cmd = ("SELECT S.name, S.latitude, S.longitude, T.year, T.month, T.temp" + 
           " FROM temperatures T" + 
           " LEFT JOIN stations S ON T.id = S.id" + 
           " WHERE " + cond)
    
    # convert table to Pandas dataframe
    df = pd.read_sql_query(cmd, conn)
    # close the database connection
    conn.close()
    # add the Country column
    df.insert(3, "Country", [country]*len(df))
    # return the Pandas dataframe
    return(df)

```

For instance, if we want the temperature readings at statins in January in India between 1980~2020:


```python
df = query_climate_database("India", 1980, 2020, 1)
df.head()
```

## Write a Geographic Scatter Function for Yearly Temperature Increases

Now, let's write a geographic scatter function that shows how the average yearly change in temperature vary within a given country.
As usual, let's first import all the packages we need.


```python
# import the relevant packages
from plotly import express as px
from sklearn.linear_model import LinearRegression
import datetime
```

Let's define a helper function called coef(), which will compute the coefficient for regressing temperature on year. 


```python
def coef(data_group):
    """
    This function takes in a grouped dataframe, and computes the coefficient for regressing temperature on year. 
    """
    x = data_group[["Year"]] # 2 brackets because X should be a df
    y = data_group["Temp"]   # 1 bracket because y should be a series
    LR = LinearRegression()
    LR.fit(x, y)
    return LR.coef_[0]
```


```python
def temperature_coefficient_plot(country, year_begin, year_end, month,
                                   min_obs, **kwargs):
    """
    This function takes in:
    - a country name
    - the starting year
    - the ending year
    - a month
    - minimum # of observations
    - other keyword arguments to be passed to px.scatter_mapbox()
    
    And returns an interactive geographic scatterplot with a point for each station, 
    such that the color of the point reflects an estimate of the yearly change in temperature 
    during the specified month and time period at that station.
    """
    
    # get climate info from the database
    df = query_climate_database(country = country, 
                       year_begin = year_begin, 
                       year_end = year_end,
                       month = month)
    # close the database connection
    conn.close()
    # count how many observations each station has
    df["obs"] = df.groupby(["NAME"])["NAME"].transform('count')
    # filter out stations with observations fewer than min_obs
    df_plot = df[df["obs"] >= min_obs]
    # get rid of the Country column
    df_plot = df_plot[["NAME", "Year", "Month", "Temp", "LATITUDE", "LONGITUDE"]]
    # group stations by Name, Month, Latitude and Longitude, compute yearly changes in temperature
    df_plot = df.groupby(["NAME", "Month", "LATITUDE", "LONGITUDE"]).apply(coef)
    # reset index
    df_plot = df_plot.reset_index()
    # rename the last column
    df_plot.columns = ["NAME", "Month", "LATITUDE", "LONGITUDE", "Estimated Yearly Increase (째C)"]
    # round to 4 decimal places
    df_plot["Estimated Yearly Increase (째C)"] = round(df_plot["Estimated Yearly Increase (째C)"], 4)
    
    # plotting
    fig = px.scatter_mapbox(df_plot, 
                        lat = "LATITUDE",
                        lon = "LONGITUDE", 
                        hover_name = "NAME", 
                        color = "Estimated Yearly Increase (째C)",
                        opacity = 0.5,
                        height = 300, 
                        color_continuous_midpoint = 0, 
                        **kwargs)
    # convert month from integer to its corresponding name (e.g. 1-->January)
    month_name = datetime.datetime.strptime(str(month), "%m")
    month_name = month_name.strftime("%B")
    # set margin
    fig.update_layout(margin={"r":0,"t":80,"l":0,"b":0}, 
                      title = f"Estimates of yearly increase in temperature in {month_name} for stations in {country}, years {year_begin}~{year_end}")
    return(fig)
  
```

Plotting time!


```python
color_map = px.colors.diverging.RdGy_r # choose a colormap

fig = temperature_coefficient_plot("India", 1980, 2020, 1, 
                                   min_obs = 10,
                                   zoom = 2,
                                   mapbox_style="carto-positron",
                                   color_continuous_scale=color_map)

fig.show()
```


<div>                            <div id="221b1dcd-a69a-442d-b28b-84eae587685e" class="plotly-graph-div" style="height:300px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("221b1dcd-a69a-442d-b28b-84eae587685e") {                    Plotly.newPlot(                        "221b1dcd-a69a-442d-b28b-84eae587685e",                        [{"hovertemplate":"<b>%{hovertext}</b><br><br>LATITUDE=%{lat}<br>LONGITUDE=%{lon}<br>Estimated Yearly Increase (\u00b0C)=%{marker.color}<extra></extra>","hovertext":["AGARTALA","AGRA","AHMADABAD","AKOLA","AKOLA","ALLAHABAD","ALLAHABAD_BAMHRAULI","AMBALA","AMRITSAR","AURANGABAD_CHIKALTH","BALASORE","BANGALORE","BANGALORE_HINDUSTAN","BAREILLY","BEGUMPETOBSY","BELGAUM_SAMBRA","BHOPAL_BAIRAGARH","BHUBANESWAR","BHUJ_RUDRAMATA","BIKANER","BOMBAY_COLABA","BOMBAY_SANTACRUZ","CALCUTTA_ALIPORE","CALCUTTA_DUM_DUM","CHERRAPUNJI","CHERRA_POONJEE","CHITRADURGA","COIMBATORE_PEELAMED","CUDDALORE","CUTTACK","DALTONGANJ","DARBHANGA","DARJEELING","DEHRADUN","DIBRUGARH_MOHANBAR","DUMKA","DWARKA","GADAG","GANGANAGAR","GAUHATI","GAYA","GOA_PANJIM","GORAKHPUR","GUNA","GWALIOR","HISSAR","HONAVAR","IMPHAL","INDORE","JABALPUR","JAGDALPUR","JAIPUR_SANGANER","JAISALMER","JHARSUGUDA","JODHPUR","KAKINADA","KARAIKAL","KODAIKANAL","KOTA_AERODROME","KOZHIKODE","KURNOOL","LUCKNOW_AMAUSI","LUDHIANA","MACHILIPATNAM","MADRAS_MINAMBAKKAM","MANGALORE","MANGALORE_BAJPE","MINICOY","MINICOYOBSY","MO_AMINI","MO_RANCHI","MUKTESWAR_KUMAON","NAGPUR_SONEGAON","NELLORE","NEW_DELHI_PALAM","NEW_DELHI_SAFDARJUN","NORTH_LAKHIMPUR","PAMBAN","PATIALA","PATNA","PBO_ANANTAPUR","PENDRA_ROAD","POONA","PORT_BLAIR","RAIPUR","RAJKOT","RAMGUNDAM","RATNAGIRI","SAGAR","SANDHEADS","SATNA","SHILONG","SHIMLA","SHOLAPUR","SILCHAR","SRINAGAR","SURAT","TEZPUR","THIRUVANANTHAPURAM","THIRUVANANTHAPURAM","TIRUCHCHIRAPALLI","TRIVANDRUM","UDAIPUR_DABOK","VARANASI_BABATPUR","VERAVAL","VISHAKHAPATNAM"],"lat":[23.883,27.1667,23.067,20.7,20.7,25.441,25.5,30.383,31.71,19.85,21.517,12.967,12.95,28.367,17.45,15.85,23.283,20.25,23.25,28.0,18.9,19.117,22.533,22.65,25.25,25.25,14.233,11.033,11.767,20.467,24.05,26.1667,27.05,30.317,27.483,24.267,22.3667,15.417,29.917,26.1,24.75,15.483,26.75,24.65,26.233,29.167,14.283,24.667,22.717,23.2,19.083,26.817,26.9,21.917,26.3,16.95,10.917,10.2333,25.15,11.25,15.8,26.75,30.9333,16.2,13.0,12.867,12.917,8.3,8.3,11.117,23.317,29.4667,21.1,14.45,28.567,28.583,27.233,9.267,30.333,25.6,14.583,22.767,18.533,11.667,21.217,22.3,18.767,16.983,23.85,20.85,24.567,25.6,31.1,17.667,24.82,34.083,21.2,26.617,8.467,8.483,10.767,8.5,24.617,25.45,20.9,17.717],"legendgroup":"","lon":[91.25,78.0333,72.633,77.033,77.067,81.735,81.9,76.767,74.797,75.4,86.933,77.583,77.633,79.4,78.47,74.617,77.35,85.833,69.667,73.3,72.8167,72.85,88.333,88.45,91.7333,91.73,76.433,77.05,79.767,85.933,84.067,85.9,88.27,78.033,95.017,87.25,69.0833,75.633,73.917,91.583,84.95,73.817,83.367,77.317,78.25,75.733,74.45,93.9,75.8,79.95,82.033,75.8,70.917,84.083,73.017,82.233,79.833,77.4667,75.85,75.783,78.067,80.883,75.8667,81.15,80.183,74.85,74.883,73.15,73.0,72.733,85.317,79.65,79.05,79.983,77.117,77.2,94.117,79.3,76.467,85.1,77.633,81.9,73.85,92.717,81.667,70.783,79.433,73.333,78.75,88.25,80.833,91.89,77.167,75.9,92.83,74.833,72.833,92.783,76.95,76.95,78.717,77.0,73.883,82.867,70.367,83.233],"marker":{"color":[-0.0062,-0.0954,0.0067,-0.0018,-0.0059,-0.0294,-0.0155,0.0814,-0.007,0.0124,-0.0085,0.036,0.05,-0.0169,0.0107,-0.0036,-0.0221,-0.0161,0.0699,0.0172,0.0114,0.0347,-0.0103,-0.0162,0.0465,-0.022,0.0156,0.0344,0.0208,-0.0101,-0.0046,-0.0716,-0.0401,0.0436,0.052,-0.0821,0.017,0.0089,-0.0076,0.0141,-0.0181,0.0224,0.0039,-0.0092,-0.0184,-0.0034,-0.0492,0.0633,0.003,-0.0252,-0.0001,0.0067,0.0026,-0.0185,0.0097,0.026,0.0213,0.0691,-0.0186,0.0334,0.0257,-0.0372,0.1318,0.0123,0.0237,0.0,0.0233,0.0252,0.0141,-0.0062,0.0053,0.0155,-0.0246,0.0235,0.0056,-0.0024,0.0955,0.0248,-0.0116,-0.0219,0.0263,-0.0096,-0.0004,0.0307,0.0014,0.0157,-0.0089,0.0032,0.0015,-0.0524,-0.0226,0.0135,0.004,0.0038,0.0161,0.0488,0.0232,0.0394,0.0086,0.0206,0.0146,0.0229,0.0724,-0.013,0.0248,-0.034],"coloraxis":"coloraxis","opacity":0.5},"mode":"markers","name":"","showlegend":false,"subplot":"mapbox","type":"scattermapbox"}],                        {"coloraxis":{"cmid":0,"colorbar":{"title":{"text":"Estimated Yearly Increase (\u00b0C)"}},"colorscale":[[0.0,"rgb(26,26,26)"],[0.1,"rgb(77,77,77)"],[0.2,"rgb(135,135,135)"],[0.3,"rgb(186,186,186)"],[0.4,"rgb(224,224,224)"],[0.5,"rgb(255,255,255)"],[0.6,"rgb(253,219,199)"],[0.7,"rgb(244,165,130)"],[0.8,"rgb(214,96,77)"],[0.9,"rgb(178,24,43)"],[1.0,"rgb(103,0,31)"]]},"height":300,"legend":{"tracegroupgap":0},"mapbox":{"center":{"lat":21.13405094339622,"lon":79.72848113207546},"domain":{"x":[0.0,1.0],"y":[0.0,1.0]},"style":"carto-positron","zoom":2},"margin":{"b":0,"l":0,"r":0,"t":80},"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"title":{"text":"Estimates of yearly increase in temperature in January for stations in India, years 1980~2020"}},                        {"responsive": true}                    ).then(function(){

var gd = document.getElementById('221b1dcd-a69a-442d-b28b-84eae587685e');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                );            </script>        </div>


## 4. Two Other Graphs

### First Graph
In this graph, we will answer the question: For a given country during a specified time range, how does the average temperature vary by the longitude & latitude of the station?


```python
def avgtemp_by_location(country, year_begin, year_end, month, min_obs, **kwargs):
    """
    This function takes in:
    - a country name
    - the starting year
    - the ending year
    - a month
    - minimum # of observations
    - other keyword arguments to be passed to px.scatter_3d()
    
    And returns a 3D scatterplot showing the relationships between 
    temperature readings of stations and their longitudes & latitudes. 
    """
    df = query_climate_database(country, year_begin, year_end, month)
    # count how many observations each station has
    df["obs"] = df.groupby(["NAME"])["NAME"].transform('count')
    # filter out stations with observations fewer than min_obs
    df_plot = df[df["obs"] >= min_obs]
    # compute average temperature by station
    avg_tmp = df_plot.groupby(["NAME", "LATITUDE", "LONGITUDE", "Country"])["Temp"].apply(np.mean)
    # convert series objects to dataframes
    df_plot = avg_tmp.to_frame()
    # reset index
    df_plot = df_plot.reset_index()
    # rename the last column to "Average Temperature"
    df_plot.columns = ["NAME", "LATITUDE", "LONGITUDE", "Country", "Average Temperature"]
    # round average temperatures to 4 decimal places
    df_plot["Average Temperature"] = round(df_plot["Average Temperature"], 4)
    # convert month from integer to its corresponding name (e.g. 1-->January)
    month_name = datetime.datetime.strptime(str(month), "%m")
    month_name = month_name.strftime("%B")
    # plotting
    fig = px.scatter_3d(df_plot, 
                     x = "LATITUDE", 
                     y = "LONGITUDE", 
                        z = "Average Temperature",
                     color = "NAME",
                     hover_name = "NAME",
                     hover_data = ["Average Temperature"],
                     title = f"Average Temperatures at Stations in {country} in {month_name} by Longitude and Latitude", **kwargs)
    
    # return the plot
    return(fig)

```


```python
fig1 = avgtemp_by_location("India", 1980, 2020, 1, 
                    min_obs = 10, 
                    width = 1000,
                    height = 300,
                    opacity = 0.5)

fig1.update_layout(margin={"r":20,"t":50,"l":10,"b":0})
# show the plot
fig1.show()
```


<div>                            <div id="70791e45-4c5e-4793-9845-73d00c318041" class="plotly-graph-div" style="height:300px; width:1000px;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("70791e45-4c5e-4793-9845-73d00c318041")) {                    Plotly.newPlot(                        "70791e45-4c5e-4793-9845-73d00c318041",                        [{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=AGARTALA<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["AGARTALA"],"legendgroup":"AGARTALA","marker":{"color":"#636efa","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"AGARTALA","scene":"scene","showlegend":true,"type":"scatter3d","x":[23.883],"y":[91.25],"z":[18.2106]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=AGRA<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["AGRA"],"legendgroup":"AGRA","marker":{"color":"#EF553B","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"AGRA","scene":"scene","showlegend":true,"type":"scatter3d","x":[27.1667],"y":[78.0333],"z":[15.1389]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=AHMADABAD<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["AHMADABAD"],"legendgroup":"AHMADABAD","marker":{"color":"#00cc96","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"AHMADABAD","scene":"scene","showlegend":true,"type":"scatter3d","x":[23.067],"y":[72.633],"z":[19.9926]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=AKOLA<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["AKOLA","AKOLA"],"legendgroup":"AKOLA","marker":{"color":"#ab63fa","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"AKOLA","scene":"scene","showlegend":true,"type":"scatter3d","x":[20.7,20.7],"y":[77.033,77.067],"z":[21.9742,22.4727]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=ALLAHABAD<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["ALLAHABAD"],"legendgroup":"ALLAHABAD","marker":{"color":"#FFA15A","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"ALLAHABAD","scene":"scene","showlegend":true,"type":"scatter3d","x":[25.441],"y":[81.735],"z":[15.9637]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=ALLAHABAD_BAMHRAULI<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["ALLAHABAD_BAMHRAULI"],"legendgroup":"ALLAHABAD_BAMHRAULI","marker":{"color":"#19d3f3","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"ALLAHABAD_BAMHRAULI","scene":"scene","showlegend":true,"type":"scatter3d","x":[25.5],"y":[81.9],"z":[15.0662]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=AMBALA<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["AMBALA"],"legendgroup":"AMBALA","marker":{"color":"#FF6692","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"AMBALA","scene":"scene","showlegend":true,"type":"scatter3d","x":[30.383],"y":[76.767],"z":[12.5157]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=AMRITSAR<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["AMRITSAR"],"legendgroup":"AMRITSAR","marker":{"color":"#B6E880","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"AMRITSAR","scene":"scene","showlegend":true,"type":"scatter3d","x":[31.71],"y":[74.797],"z":[11.0174]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=AURANGABAD_CHIKALTH<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["AURANGABAD_CHIKALTH"],"legendgroup":"AURANGABAD_CHIKALTH","marker":{"color":"#FF97FF","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"AURANGABAD_CHIKALTH","scene":"scene","showlegend":true,"type":"scatter3d","x":[19.85],"y":[75.4],"z":[22.1303]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=BALASORE<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["BALASORE"],"legendgroup":"BALASORE","marker":{"color":"#FECB52","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"BALASORE","scene":"scene","showlegend":true,"type":"scatter3d","x":[21.517],"y":[86.933],"z":[20.302]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=BANGALORE<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["BANGALORE"],"legendgroup":"BANGALORE","marker":{"color":"#636efa","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"BANGALORE","scene":"scene","showlegend":true,"type":"scatter3d","x":[12.967],"y":[77.583],"z":[22.0968]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=BANGALORE_HINDUSTAN<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["BANGALORE_HINDUSTAN"],"legendgroup":"BANGALORE_HINDUSTAN","marker":{"color":"#EF553B","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"BANGALORE_HINDUSTAN","scene":"scene","showlegend":true,"type":"scatter3d","x":[12.95],"y":[77.633],"z":[21.7417]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=BAREILLY<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["BAREILLY"],"legendgroup":"BAREILLY","marker":{"color":"#00cc96","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"BAREILLY","scene":"scene","showlegend":true,"type":"scatter3d","x":[28.367],"y":[79.4],"z":[13.0095]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=BEGUMPETOBSY<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["BEGUMPETOBSY"],"legendgroup":"BEGUMPETOBSY","marker":{"color":"#ab63fa","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"BEGUMPETOBSY","scene":"scene","showlegend":true,"type":"scatter3d","x":[17.45],"y":[78.47],"z":[23.0084]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=BELGAUM_SAMBRA<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["BELGAUM_SAMBRA"],"legendgroup":"BELGAUM_SAMBRA","marker":{"color":"#FFA15A","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"BELGAUM_SAMBRA","scene":"scene","showlegend":true,"type":"scatter3d","x":[15.85],"y":[74.617],"z":[21.8685]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=BHOPAL_BAIRAGARH<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["BHOPAL_BAIRAGARH"],"legendgroup":"BHOPAL_BAIRAGARH","marker":{"color":"#19d3f3","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"BHOPAL_BAIRAGARH","scene":"scene","showlegend":true,"type":"scatter3d","x":[23.283],"y":[77.35],"z":[17.7455]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=BHUBANESWAR<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["BHUBANESWAR"],"legendgroup":"BHUBANESWAR","marker":{"color":"#FF6692","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"BHUBANESWAR","scene":"scene","showlegend":true,"type":"scatter3d","x":[20.25],"y":[85.833],"z":[22.4345]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=BHUJ_RUDRAMATA<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["BHUJ_RUDRAMATA"],"legendgroup":"BHUJ_RUDRAMATA","marker":{"color":"#B6E880","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"BHUJ_RUDRAMATA","scene":"scene","showlegend":true,"type":"scatter3d","x":[23.25],"y":[69.667],"z":[19.0934]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=BIKANER<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["BIKANER"],"legendgroup":"BIKANER","marker":{"color":"#FF97FF","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"BIKANER","scene":"scene","showlegend":true,"type":"scatter3d","x":[28.0],"y":[73.3],"z":[15.4788]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=BOMBAY_COLABA<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["BOMBAY_COLABA"],"legendgroup":"BOMBAY_COLABA","marker":{"color":"#FECB52","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"BOMBAY_COLABA","scene":"scene","showlegend":true,"type":"scatter3d","x":[18.9],"y":[72.8167],"z":[24.8094]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=BOMBAY_SANTACRUZ<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["BOMBAY_SANTACRUZ"],"legendgroup":"BOMBAY_SANTACRUZ","marker":{"color":"#636efa","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"BOMBAY_SANTACRUZ","scene":"scene","showlegend":true,"type":"scatter3d","x":[19.117],"y":[72.85],"z":[24.806]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=CALCUTTA_ALIPORE<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["CALCUTTA_ALIPORE"],"legendgroup":"CALCUTTA_ALIPORE","marker":{"color":"#EF553B","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"CALCUTTA_ALIPORE","scene":"scene","showlegend":true,"type":"scatter3d","x":[22.533],"y":[88.333],"z":[19.735]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=CALCUTTA_DUM_DUM<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["CALCUTTA_DUM_DUM"],"legendgroup":"CALCUTTA_DUM_DUM","marker":{"color":"#00cc96","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"CALCUTTA_DUM_DUM","scene":"scene","showlegend":true,"type":"scatter3d","x":[22.65],"y":[88.45],"z":[18.3127]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=CHERRAPUNJI<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["CHERRAPUNJI"],"legendgroup":"CHERRAPUNJI","marker":{"color":"#ab63fa","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"CHERRAPUNJI","scene":"scene","showlegend":true,"type":"scatter3d","x":[25.25],"y":[91.7333],"z":[11.5697]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=CHERRA_POONJEE<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["CHERRA_POONJEE"],"legendgroup":"CHERRA_POONJEE","marker":{"color":"#FFA15A","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"CHERRA_POONJEE","scene":"scene","showlegend":true,"type":"scatter3d","x":[25.25],"y":[91.73],"z":[11.51]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=CHITRADURGA<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["CHITRADURGA"],"legendgroup":"CHITRADURGA","marker":{"color":"#19d3f3","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"CHITRADURGA","scene":"scene","showlegend":true,"type":"scatter3d","x":[14.233],"y":[76.433],"z":[23.1579]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=COIMBATORE_PEELAMED<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["COIMBATORE_PEELAMED"],"legendgroup":"COIMBATORE_PEELAMED","marker":{"color":"#FF6692","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"COIMBATORE_PEELAMED","scene":"scene","showlegend":true,"type":"scatter3d","x":[11.033],"y":[77.05],"z":[24.4008]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=CUDDALORE<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["CUDDALORE"],"legendgroup":"CUDDALORE","marker":{"color":"#B6E880","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"CUDDALORE","scene":"scene","showlegend":true,"type":"scatter3d","x":[11.767],"y":[79.767],"z":[24.8603]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=CUTTACK<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["CUTTACK"],"legendgroup":"CUTTACK","marker":{"color":"#FF97FF","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"CUTTACK","scene":"scene","showlegend":true,"type":"scatter3d","x":[20.467],"y":[85.933],"z":[23.08]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=DALTONGANJ<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["DALTONGANJ"],"legendgroup":"DALTONGANJ","marker":{"color":"#FECB52","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"DALTONGANJ","scene":"scene","showlegend":true,"type":"scatter3d","x":[24.05],"y":[84.067],"z":[16.9878]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=DARBHANGA<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["DARBHANGA"],"legendgroup":"DARBHANGA","marker":{"color":"#636efa","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"DARBHANGA","scene":"scene","showlegend":true,"type":"scatter3d","x":[26.1667],"y":[85.9],"z":[15.4888]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=DARJEELING<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["DARJEELING"],"legendgroup":"DARJEELING","marker":{"color":"#EF553B","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"DARJEELING","scene":"scene","showlegend":true,"type":"scatter3d","x":[27.05],"y":[88.27],"z":[6.6571]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=DEHRADUN<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["DEHRADUN"],"legendgroup":"DEHRADUN","marker":{"color":"#00cc96","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"DEHRADUN","scene":"scene","showlegend":true,"type":"scatter3d","x":[30.317],"y":[78.033],"z":[12.5692]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=DIBRUGARH_MOHANBAR<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["DIBRUGARH_MOHANBAR"],"legendgroup":"DIBRUGARH_MOHANBAR","marker":{"color":"#ab63fa","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"DIBRUGARH_MOHANBAR","scene":"scene","showlegend":true,"type":"scatter3d","x":[27.483],"y":[95.017],"z":[16.1272]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=DUMKA<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["DUMKA"],"legendgroup":"DUMKA","marker":{"color":"#FFA15A","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"DUMKA","scene":"scene","showlegend":true,"type":"scatter3d","x":[24.267],"y":[87.25],"z":[18.7554]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=DWARKA<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["DWARKA"],"legendgroup":"DWARKA","marker":{"color":"#19d3f3","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"DWARKA","scene":"scene","showlegend":true,"type":"scatter3d","x":[22.3667],"y":[69.0833],"z":[20.974]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=GADAG<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["GADAG"],"legendgroup":"GADAG","marker":{"color":"#FF6692","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"GADAG","scene":"scene","showlegend":true,"type":"scatter3d","x":[15.417],"y":[75.633],"z":[23.168]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=GANGANAGAR<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["GANGANAGAR"],"legendgroup":"GANGANAGAR","marker":{"color":"#B6E880","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"GANGANAGAR","scene":"scene","showlegend":true,"type":"scatter3d","x":[29.917],"y":[73.917],"z":[12.2838]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=GAUHATI<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["GAUHATI"],"legendgroup":"GAUHATI","marker":{"color":"#FF97FF","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"GAUHATI","scene":"scene","showlegend":true,"type":"scatter3d","x":[26.1],"y":[91.583],"z":[17.1108]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=GAYA<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["GAYA"],"legendgroup":"GAYA","marker":{"color":"#FECB52","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"GAYA","scene":"scene","showlegend":true,"type":"scatter3d","x":[24.75],"y":[84.95],"z":[15.3928]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=GOA_PANJIM<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["GOA_PANJIM"],"legendgroup":"GOA_PANJIM","marker":{"color":"#636efa","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"GOA_PANJIM","scene":"scene","showlegend":true,"type":"scatter3d","x":[15.483],"y":[73.817],"z":[26.122]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=GORAKHPUR<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["GORAKHPUR"],"legendgroup":"GORAKHPUR","marker":{"color":"#EF553B","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"GORAKHPUR","scene":"scene","showlegend":true,"type":"scatter3d","x":[26.75],"y":[83.367],"z":[14.5]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=GUNA<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["GUNA"],"legendgroup":"GUNA","marker":{"color":"#00cc96","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"GUNA","scene":"scene","showlegend":true,"type":"scatter3d","x":[24.65],"y":[77.317],"z":[16.5915]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=GWALIOR<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["GWALIOR"],"legendgroup":"GWALIOR","marker":{"color":"#ab63fa","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"GWALIOR","scene":"scene","showlegend":true,"type":"scatter3d","x":[26.233],"y":[78.25],"z":[14.3742]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=HISSAR<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["HISSAR"],"legendgroup":"HISSAR","marker":{"color":"#FFA15A","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"HISSAR","scene":"scene","showlegend":true,"type":"scatter3d","x":[29.167],"y":[75.733],"z":[11.8713]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=HONAVAR<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["HONAVAR"],"legendgroup":"HONAVAR","marker":{"color":"#19d3f3","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"HONAVAR","scene":"scene","showlegend":true,"type":"scatter3d","x":[14.283],"y":[74.45],"z":[25.6623]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=IMPHAL<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["IMPHAL"],"legendgroup":"IMPHAL","marker":{"color":"#FF6692","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"IMPHAL","scene":"scene","showlegend":true,"type":"scatter3d","x":[24.667],"y":[93.9],"z":[14.8563]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=INDORE<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["INDORE"],"legendgroup":"INDORE","marker":{"color":"#B6E880","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"INDORE","scene":"scene","showlegend":true,"type":"scatter3d","x":[22.717],"y":[75.8],"z":[18.2089]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=JABALPUR<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["JABALPUR"],"legendgroup":"JABALPUR","marker":{"color":"#FF97FF","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"JABALPUR","scene":"scene","showlegend":true,"type":"scatter3d","x":[23.2],"y":[79.95],"z":[18.5865]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=JAGDALPUR<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["JAGDALPUR"],"legendgroup":"JAGDALPUR","marker":{"color":"#FECB52","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"JAGDALPUR","scene":"scene","showlegend":true,"type":"scatter3d","x":[19.083],"y":[82.033],"z":[20.2811]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=JAIPUR_SANGANER<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["JAIPUR_SANGANER"],"legendgroup":"JAIPUR_SANGANER","marker":{"color":"#636efa","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"JAIPUR_SANGANER","scene":"scene","showlegend":true,"type":"scatter3d","x":[26.817],"y":[75.8],"z":[15.7323]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=JAISALMER<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["JAISALMER"],"legendgroup":"JAISALMER","marker":{"color":"#EF553B","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"JAISALMER","scene":"scene","showlegend":true,"type":"scatter3d","x":[26.9],"y":[70.917],"z":[16.3245]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=JHARSUGUDA<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["JHARSUGUDA"],"legendgroup":"JHARSUGUDA","marker":{"color":"#00cc96","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"JHARSUGUDA","scene":"scene","showlegend":true,"type":"scatter3d","x":[21.917],"y":[84.083],"z":[20.1677]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=JODHPUR<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["JODHPUR"],"legendgroup":"JODHPUR","marker":{"color":"#ab63fa","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"JODHPUR","scene":"scene","showlegend":true,"type":"scatter3d","x":[26.3],"y":[73.017],"z":[17.2307]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=KAKINADA<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["KAKINADA"],"legendgroup":"KAKINADA","marker":{"color":"#FFA15A","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"KAKINADA","scene":"scene","showlegend":true,"type":"scatter3d","x":[16.95],"y":[82.233],"z":[24.2937]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=KARAIKAL<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["KARAIKAL"],"legendgroup":"KARAIKAL","marker":{"color":"#19d3f3","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"KARAIKAL","scene":"scene","showlegend":true,"type":"scatter3d","x":[10.917],"y":[79.833],"z":[25.7607]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=KODAIKANAL<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["KODAIKANAL"],"legendgroup":"KODAIKANAL","marker":{"color":"#FF6692","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"KODAIKANAL","scene":"scene","showlegend":true,"type":"scatter3d","x":[10.2333],"y":[77.4667],"z":[12.9273]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=KOTA_AERODROME<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["KOTA_AERODROME"],"legendgroup":"KOTA_AERODROME","marker":{"color":"#B6E880","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"KOTA_AERODROME","scene":"scene","showlegend":true,"type":"scatter3d","x":[25.15],"y":[75.85],"z":[16.9792]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=KOZHIKODE<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["KOZHIKODE"],"legendgroup":"KOZHIKODE","marker":{"color":"#FF97FF","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"KOZHIKODE","scene":"scene","showlegend":true,"type":"scatter3d","x":[11.25],"y":[75.783],"z":[28.3778]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=KURNOOL<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["KURNOOL"],"legendgroup":"KURNOOL","marker":{"color":"#FECB52","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"KURNOOL","scene":"scene","showlegend":true,"type":"scatter3d","x":[15.8],"y":[78.067],"z":[25.0451]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=LUCKNOW_AMAUSI<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["LUCKNOW_AMAUSI"],"legendgroup":"LUCKNOW_AMAUSI","marker":{"color":"#636efa","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"LUCKNOW_AMAUSI","scene":"scene","showlegend":true,"type":"scatter3d","x":[26.75],"y":[80.883],"z":[14.1747]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=LUDHIANA<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["LUDHIANA"],"legendgroup":"LUDHIANA","marker":{"color":"#EF553B","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"LUDHIANA","scene":"scene","showlegend":true,"type":"scatter3d","x":[30.9333],"y":[75.8667],"z":[12.392]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=MACHILIPATNAM<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["MACHILIPATNAM"],"legendgroup":"MACHILIPATNAM","marker":{"color":"#00cc96","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"MACHILIPATNAM","scene":"scene","showlegend":true,"type":"scatter3d","x":[16.2],"y":[81.15],"z":[25.1876]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=MADRAS_MINAMBAKKAM<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["MADRAS_MINAMBAKKAM"],"legendgroup":"MADRAS_MINAMBAKKAM","marker":{"color":"#ab63fa","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"MADRAS_MINAMBAKKAM","scene":"scene","showlegend":true,"type":"scatter3d","x":[13.0],"y":[80.183],"z":[25.0435]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=MANGALORE_BAJPE<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["MANGALORE_BAJPE"],"legendgroup":"MANGALORE_BAJPE","marker":{"color":"#FFA15A","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"MANGALORE_BAJPE","scene":"scene","showlegend":true,"type":"scatter3d","x":[12.917],"y":[74.883],"z":[26.805]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=MINICOY<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["MINICOY"],"legendgroup":"MINICOY","marker":{"color":"#19d3f3","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"MINICOY","scene":"scene","showlegend":true,"type":"scatter3d","x":[8.3],"y":[73.15],"z":[27.5959]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=MINICOYOBSY<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["MINICOYOBSY"],"legendgroup":"MINICOYOBSY","marker":{"color":"#FF6692","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"MINICOYOBSY","scene":"scene","showlegend":true,"type":"scatter3d","x":[8.3],"y":[73.0],"z":[27.6415]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=MO_AMINI<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["MO_AMINI"],"legendgroup":"MO_AMINI","marker":{"color":"#B6E880","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"MO_AMINI","scene":"scene","showlegend":true,"type":"scatter3d","x":[11.117],"y":[72.733],"z":[28.1853]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=MO_RANCHI<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["MO_RANCHI"],"legendgroup":"MO_RANCHI","marker":{"color":"#FF97FF","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"MO_RANCHI","scene":"scene","showlegend":true,"type":"scatter3d","x":[23.317],"y":[85.317],"z":[16.6543]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=MUKTESWAR_KUMAON<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["MUKTESWAR_KUMAON"],"legendgroup":"MUKTESWAR_KUMAON","marker":{"color":"#FECB52","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"MUKTESWAR_KUMAON","scene":"scene","showlegend":true,"type":"scatter3d","x":[29.4667],"y":[79.65],"z":[6.8015]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=NAGPUR_SONEGAON<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["NAGPUR_SONEGAON"],"legendgroup":"NAGPUR_SONEGAON","marker":{"color":"#636efa","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"NAGPUR_SONEGAON","scene":"scene","showlegend":true,"type":"scatter3d","x":[21.1],"y":[79.05],"z":[20.9911]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=NELLORE<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["NELLORE"],"legendgroup":"NELLORE","marker":{"color":"#EF553B","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"NELLORE","scene":"scene","showlegend":true,"type":"scatter3d","x":[14.45],"y":[79.983],"z":[25.1983]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=NEW_DELHI_PALAM<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["NEW_DELHI_PALAM"],"legendgroup":"NEW_DELHI_PALAM","marker":{"color":"#00cc96","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"NEW_DELHI_PALAM","scene":"scene","showlegend":true,"type":"scatter3d","x":[28.567],"y":[77.117],"z":[13.2115]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=NEW_DELHI_SAFDARJUN<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["NEW_DELHI_SAFDARJUN"],"legendgroup":"NEW_DELHI_SAFDARJUN","marker":{"color":"#ab63fa","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"NEW_DELHI_SAFDARJUN","scene":"scene","showlegend":true,"type":"scatter3d","x":[28.583],"y":[77.2],"z":[13.848]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=NORTH_LAKHIMPUR<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["NORTH_LAKHIMPUR"],"legendgroup":"NORTH_LAKHIMPUR","marker":{"color":"#FFA15A","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"NORTH_LAKHIMPUR","scene":"scene","showlegend":true,"type":"scatter3d","x":[27.233],"y":[94.117],"z":[16.8971]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=PAMBAN<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["PAMBAN"],"legendgroup":"PAMBAN","marker":{"color":"#19d3f3","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"PAMBAN","scene":"scene","showlegend":true,"type":"scatter3d","x":[9.267],"y":[79.3],"z":[26.3092]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=PATIALA<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["PATIALA"],"legendgroup":"PATIALA","marker":{"color":"#FF6692","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"PATIALA","scene":"scene","showlegend":true,"type":"scatter3d","x":[30.333],"y":[76.467],"z":[12.0536]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=PATNA<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["PATNA"],"legendgroup":"PATNA","marker":{"color":"#B6E880","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"PATNA","scene":"scene","showlegend":true,"type":"scatter3d","x":[25.6],"y":[85.1],"z":[14.9421]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=PBO_ANANTAPUR<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["PBO_ANANTAPUR"],"legendgroup":"PBO_ANANTAPUR","marker":{"color":"#FF97FF","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"PBO_ANANTAPUR","scene":"scene","showlegend":true,"type":"scatter3d","x":[14.583],"y":[77.633],"z":[24.4265]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=PENDRA_ROAD<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["PENDRA_ROAD"],"legendgroup":"PENDRA_ROAD","marker":{"color":"#FECB52","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"PENDRA_ROAD","scene":"scene","showlegend":true,"type":"scatter3d","x":[22.767],"y":[81.9],"z":[17.2968]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=POONA<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["POONA"],"legendgroup":"POONA","marker":{"color":"#636efa","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"POONA","scene":"scene","showlegend":true,"type":"scatter3d","x":[18.533],"y":[73.85],"z":[20.7753]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=PORT_BLAIR<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["PORT_BLAIR"],"legendgroup":"PORT_BLAIR","marker":{"color":"#EF553B","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"PORT_BLAIR","scene":"scene","showlegend":true,"type":"scatter3d","x":[11.667],"y":[92.717],"z":[26.2269]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=RAIPUR<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["RAIPUR"],"legendgroup":"RAIPUR","marker":{"color":"#00cc96","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"RAIPUR","scene":"scene","showlegend":true,"type":"scatter3d","x":[21.217],"y":[81.667],"z":[21.0188]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=RAJKOT<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["RAJKOT"],"legendgroup":"RAJKOT","marker":{"color":"#ab63fa","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"RAJKOT","scene":"scene","showlegend":true,"type":"scatter3d","x":[22.3],"y":[70.783],"z":[20.4255]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=RAMGUNDAM<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["RAMGUNDAM"],"legendgroup":"RAMGUNDAM","marker":{"color":"#FFA15A","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"RAMGUNDAM","scene":"scene","showlegend":true,"type":"scatter3d","x":[18.767],"y":[79.433],"z":[22.4527]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=RATNAGIRI<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["RATNAGIRI"],"legendgroup":"RATNAGIRI","marker":{"color":"#19d3f3","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"RATNAGIRI","scene":"scene","showlegend":true,"type":"scatter3d","x":[16.983],"y":[73.333],"z":[24.6322]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=SAGAR<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["SAGAR"],"legendgroup":"SAGAR","marker":{"color":"#FF6692","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"SAGAR","scene":"scene","showlegend":true,"type":"scatter3d","x":[23.85],"y":[78.75],"z":[17.6392]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=SANDHEADS<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["SANDHEADS"],"legendgroup":"SANDHEADS","marker":{"color":"#B6E880","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"SANDHEADS","scene":"scene","showlegend":true,"type":"scatter3d","x":[20.85],"y":[88.25],"z":[23.0391]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=SATNA<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["SATNA"],"legendgroup":"SATNA","marker":{"color":"#FF97FF","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"SATNA","scene":"scene","showlegend":true,"type":"scatter3d","x":[24.567],"y":[80.833],"z":[16.2577]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=SHILONG<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["SHILONG"],"legendgroup":"SHILONG","marker":{"color":"#FECB52","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"SHILONG","scene":"scene","showlegend":true,"type":"scatter3d","x":[25.6],"y":[91.89],"z":[10.3036]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=SHIMLA<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["SHIMLA"],"legendgroup":"SHIMLA","marker":{"color":"#636efa","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"SHIMLA","scene":"scene","showlegend":true,"type":"scatter3d","x":[31.1],"y":[77.167],"z":[7.1669]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=SHOLAPUR<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["SHOLAPUR"],"legendgroup":"SHOLAPUR","marker":{"color":"#EF553B","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"SHOLAPUR","scene":"scene","showlegend":true,"type":"scatter3d","x":[17.667],"y":[75.9],"z":[23.8492]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=SILCHAR<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["SILCHAR"],"legendgroup":"SILCHAR","marker":{"color":"#00cc96","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"SILCHAR","scene":"scene","showlegend":true,"type":"scatter3d","x":[24.82],"y":[92.83],"z":[18.5333]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=SRINAGAR<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["SRINAGAR"],"legendgroup":"SRINAGAR","marker":{"color":"#ab63fa","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"SRINAGAR","scene":"scene","showlegend":true,"type":"scatter3d","x":[34.083],"y":[74.833],"z":[2.3144]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=SURAT<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["SURAT"],"legendgroup":"SURAT","marker":{"color":"#FFA15A","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"SURAT","scene":"scene","showlegend":true,"type":"scatter3d","x":[21.2],"y":[72.833],"z":[22.1766]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=TEZPUR<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["TEZPUR"],"legendgroup":"TEZPUR","marker":{"color":"#19d3f3","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"TEZPUR","scene":"scene","showlegend":true,"type":"scatter3d","x":[26.617],"y":[92.783],"z":[17.7592]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=THIRUVANANTHAPURAM<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["THIRUVANANTHAPURAM","THIRUVANANTHAPURAM"],"legendgroup":"THIRUVANANTHAPURAM","marker":{"color":"#FF6692","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"THIRUVANANTHAPURAM","scene":"scene","showlegend":true,"type":"scatter3d","x":[8.467,8.483],"y":[76.95,76.95],"z":[27.6558,27.5607]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=TIRUCHCHIRAPALLI<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["TIRUCHCHIRAPALLI"],"legendgroup":"TIRUCHCHIRAPALLI","marker":{"color":"#B6E880","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"TIRUCHCHIRAPALLI","scene":"scene","showlegend":true,"type":"scatter3d","x":[10.767],"y":[78.717],"z":[25.6505]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=TRIVANDRUM<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["TRIVANDRUM"],"legendgroup":"TRIVANDRUM","marker":{"color":"#FF97FF","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"TRIVANDRUM","scene":"scene","showlegend":true,"type":"scatter3d","x":[8.5],"y":[77.0],"z":[27.324]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=UDAIPUR_DABOK<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["UDAIPUR_DABOK"],"legendgroup":"UDAIPUR_DABOK","marker":{"color":"#FECB52","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"UDAIPUR_DABOK","scene":"scene","showlegend":true,"type":"scatter3d","x":[24.617],"y":[73.883],"z":[16.222]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=VARANASI_BABATPUR<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["VARANASI_BABATPUR"],"legendgroup":"VARANASI_BABATPUR","marker":{"color":"#636efa","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"VARANASI_BABATPUR","scene":"scene","showlegend":true,"type":"scatter3d","x":[25.45],"y":[82.867],"z":[15.29]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=VERAVAL<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["VERAVAL"],"legendgroup":"VERAVAL","marker":{"color":"#EF553B","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"VERAVAL","scene":"scene","showlegend":true,"type":"scatter3d","x":[20.9],"y":[70.367],"z":[22.1554]},{"hovertemplate":"<b>%{hovertext}</b><br><br>NAME=VISHAKHAPATNAM<br>LATITUDE=%{x}<br>LONGITUDE=%{y}<br>Average Temperature=%{z}<extra></extra>","hovertext":["VISHAKHAPATNAM"],"legendgroup":"VISHAKHAPATNAM","marker":{"color":"#00cc96","opacity":0.5,"symbol":"circle"},"mode":"markers","name":"VISHAKHAPATNAM","scene":"scene","showlegend":true,"type":"scatter3d","x":[17.717],"y":[83.233],"z":[24.1004]}],                        {"height":300,"legend":{"title":{"text":"NAME"},"tracegroupgap":0},"margin":{"b":0,"l":10,"r":20,"t":50},"scene":{"domain":{"x":[0.0,1.0],"y":[0.0,1.0]},"xaxis":{"title":{"text":"LATITUDE"}},"yaxis":{"title":{"text":"LONGITUDE"}},"zaxis":{"title":{"text":"Average Temperature"}}},"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"title":{"text":"Average Temperatures at Stations in India in January by Longitude and Latitude"},"width":1000},                        {"responsive": true}                    ).then(function(){

var gd = document.getElementById('70791e45-4c5e-4793-9845-73d00c318041');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>

We can see that the higher the latitude, the lower the average temperature recorded at the station. This makes sense, because higher latitude means being more remote from the equator and thus being colder. Additionally, there does not seem to be a relationship between longitude of the station and average temperature, which also makes sense because longitude measures how Eastern/Western the station is, which should have little impact on temperature.
### b) Second Graph
In this graph, we will answer the question: How are temperature readings at 3 randomly chosen stations in a country distributed during a specified time range, and how are these distributions compared to another 3 randomly chosen stations in another country?


```python
df1 = query_climate_database("India", 1980, 2020, 1)
df2 = query_climate_database("Algeria", 1980, 2020, 1)
df1["obs"] = df1.groupby(["NAME"])["NAME"].transform('count')
df2["obs"] = df2.groupby(["NAME"])["NAME"].transform('count')
# filter out stations with observations fewer than min_obs
df1_plot = df1[df1["obs"] >= min_obs]
df2_plot = df2[df2["obs"] >= min_obs]
# get lists of stations
stations1 = df1_plot.NAME.unique()
stations2 = df2_plot.NAME.unique()
# randomly choose 3 stations from each country
stations1 = stations1[np.random.randint(low=1, high=len(stations1), size=(3, 1))].squeeze()
stations2 = stations2[np.random.randint(low=1, high=len(stations2), size=(3, 1))].squeeze()
# select rows that contain info for the 3 stations
df1_plot = df1_plot[df1_plot["NAME"].isin(stations1)]
df2_plot = df2_plot[df2_plot["NAME"].isin(stations2)]
# concatenate the two dataframes
df_plot = pd.concat([df1_plot, df2_plot])
# plotting
fig = px.histogram(df_plot, 
                   x = "Temp", 
                   color = "NAME",
                   opacity = 0.5, 
                   nbins = 30, 
                   barmode='stack',
                   width = 600,
                   height = 300,
                  facet_row = "Country")
# reduce whitespace
fig.update_layout(margin={"r":0,"t":0,"l":0,"b":0})
# show the plot
fig.show()
```


<div>                            <div id="b882bd2a-3f3c-44a3-bedb-cf7305b9e372" class="plotly-graph-div" style="height:300px; width:600px;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("b882bd2a-3f3c-44a3-bedb-cf7305b9e372")) {                    Plotly.newPlot(                        "b882bd2a-3f3c-44a3-bedb-cf7305b9e372",                        [{"alignmentgroup":"True","bingroup":"x","hovertemplate":"NAME=DWARKA<br>Country=India<br>Temp=%{x}<br>count=%{y}<extra></extra>","legendgroup":"DWARKA","marker":{"color":"#636efa","opacity":0.5,"pattern":{"shape":""}},"name":"DWARKA","nbinsx":30,"offsetgroup":"DWARKA","orientation":"v","showlegend":true,"type":"histogram","x":[19.51,20.47,20.22,20.32,22.32,19.92,21.21,19.77,22.37,21.37,20.97,21.27,20.67,20.87,21.17,21.67,20.62,21.42,21.67,20.87,20.52,20.96,21.52,19.87,21.89,20.75,20.6,21.05,18.6,21.55,22.3,21.65,22.3,21.6,20.25,19.51,20.47,20.22,20.32,22.32,19.92,21.21,19.77,22.37,21.37,20.97,21.27,20.67,20.87,21.17,21.67,20.62,21.42,21.67,20.87,20.52,20.96,21.52,19.87,21.89,20.75,20.6,21.05,18.6,21.55,22.3,21.65,22.3,21.6,20.25],"xaxis":"x2","yaxis":"y2"},{"alignmentgroup":"True","bingroup":"x","hovertemplate":"NAME=JABALPUR<br>Country=India<br>Temp=%{x}<br>count=%{y}<extra></extra>","legendgroup":"JABALPUR","marker":{"color":"#EF553B","opacity":0.5,"pattern":{"shape":""}},"name":"JABALPUR","nbinsx":30,"offsetgroup":"JABALPUR","orientation":"v","showlegend":true,"type":"histogram","x":[20.12,18.17,18.66,19.36,19.29,19.04,19.47,17.6,20.91,18.12,20.18,17.46,17.54,18.23,19.16,17.57,18.35,17.65,18.86,18.69,18.45,19.31,18.32,20.94,17.31,17.67,17.15,17.99,18.58,16.68,19.68,19.11,18.24,18.08,20.12,18.17,18.66,19.36,19.29,19.04,19.47,17.6,20.91,18.12,20.18,17.46,17.54,18.23,19.16,17.57,18.35,17.65,18.86,18.69,18.45,19.31,18.32,20.94,17.31,17.67,17.15,17.99,18.58,16.68,19.68,19.11,18.24,18.08],"xaxis":"x2","yaxis":"y2"},{"alignmentgroup":"True","bingroup":"x","hovertemplate":"NAME=GANGANAGAR<br>Country=India<br>Temp=%{x}<br>count=%{y}<extra></extra>","legendgroup":"GANGANAGAR","marker":{"color":"#00cc96","opacity":0.5,"pattern":{"shape":""}},"name":"GANGANAGAR","nbinsx":30,"offsetgroup":"GANGANAGAR","orientation":"v","showlegend":true,"type":"histogram","x":[12.02,14.31,11.69,11.02,12.05,11.76,12.72,11.62,13.02,12.82,12.79,12.53,11.34,12.02,14.31,11.69,11.02,12.05,11.76,12.72,11.62,13.02,12.82,12.79,12.53,11.34],"xaxis":"x2","yaxis":"y2"},{"alignmentgroup":"True","bingroup":"x","hovertemplate":"NAME=BOUCHEGOUF<br>Country=Algeria<br>Temp=%{x}<br>count=%{y}<extra></extra>","legendgroup":"BOUCHEGOUF","marker":{"color":"#ab63fa","opacity":0.5,"pattern":{"shape":""}},"name":"BOUCHEGOUF","nbinsx":30,"offsetgroup":"BOUCHEGOUF","orientation":"v","showlegend":true,"type":"histogram","x":[9.09,11.99,11.14,12.74,11.94,12.04,11.81,11.46,10.65,12.86,10.6,12.9,10.4,11.8,9.09,11.99,11.14,12.74,11.94,12.04,11.81,11.46,10.65,12.86,10.6,12.9,10.4,11.8],"xaxis":"x","yaxis":"y"},{"alignmentgroup":"True","bingroup":"x","hovertemplate":"NAME=SIDI_BEL_ABBES<br>Country=Algeria<br>Temp=%{x}<br>count=%{y}<extra></extra>","legendgroup":"SIDI_BEL_ABBES","marker":{"color":"#FFA15A","opacity":0.5,"pattern":{"shape":""}},"name":"SIDI_BEL_ABBES","nbinsx":30,"offsetgroup":"SIDI_BEL_ABBES","orientation":"v","showlegend":true,"type":"histogram","x":[6.34,8.19,11.04,9.54,9.04,7.44,10.04,9.83,8.59,9.94,9.0,6.9,9.5,10.3,7.7,7.3,9.7,7.65,8.1,6.34,8.19,11.04,9.54,9.04,7.44,10.04,9.83,8.59,9.94,9.0,6.9,9.5,10.3,7.7,7.3,9.7,7.65,8.1],"xaxis":"x","yaxis":"y"},{"alignmentgroup":"True","bingroup":"x","hovertemplate":"NAME=EL_BAYADH<br>Country=Algeria<br>Temp=%{x}<br>count=%{y}<extra></extra>","legendgroup":"EL_BAYADH","marker":{"color":"#19d3f3","opacity":0.5,"pattern":{"shape":""}},"name":"EL_BAYADH","nbinsx":30,"offsetgroup":"EL_BAYADH","orientation":"v","showlegend":true,"type":"histogram","x":[2.13,4.91,4.01,3.43,2.8,3.17,3.94,5.25,3.37,3.18,2.7,3.54,4.08,3.55,7.16,5.35,5.21,4.58,2.48,3.38,4.93,2.03,1.58,5.78,5.88,3.48,6.08,6.18,3.48,4.08,5.08,3.48,7.68,2.52,5.5,3.0,4.35,2.13,4.91,4.01,3.43,2.8,3.17,3.94,5.25,3.37,3.18,2.7,3.54,4.08,3.55,7.16,5.35,5.21,4.58,2.48,3.38,4.93,2.03,1.58,5.78,5.88,3.48,6.08,6.18,3.48,4.08,5.08,3.48,7.68,2.52,5.5,3.0,4.35],"xaxis":"x","yaxis":"y"}],                        {"annotations":[{"font":{},"showarrow":false,"text":"Country=Algeria","textangle":90,"x":0.98,"xanchor":"left","xref":"paper","y":0.2425,"yanchor":"middle","yref":"paper"},{"font":{},"showarrow":false,"text":"Country=India","textangle":90,"x":0.98,"xanchor":"left","xref":"paper","y":0.7575000000000001,"yanchor":"middle","yref":"paper"}],"barmode":"stack","height":300,"legend":{"title":{"text":"NAME"},"tracegroupgap":0},"margin":{"b":0,"l":0,"r":0,"t":0},"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"width":600,"xaxis":{"anchor":"y","domain":[0.0,0.98],"title":{"text":"Temp"}},"xaxis2":{"anchor":"y2","domain":[0.0,0.98],"matches":"x","showticklabels":false},"yaxis":{"anchor":"x","domain":[0.0,0.485],"title":{"text":"count"}},"yaxis2":{"anchor":"x2","domain":[0.515,1.0],"matches":"y","title":{"text":"count"}}},                        {"responsive": true}                    ).then(function(){

var gd = document.getElementById('b882bd2a-3f3c-44a3-bedb-cf7305b9e372');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>



```python
def tempdist(country1, country2, year_begin, year_end, month, min_obs, **kwargs):
    """
    This function takes in:
    - two country names
    - the starting year
    - the ending year
    - a month
    - minimum # of observations
    - other keyword arguments to be passed to px.histogram()
    
    And returns a multifaceted histogram showing the distributions of temperature readings at 6 stations
    (3 stations for each country) in the two specified countries during a given time period. 
    """
    df1 = query_climate_database(country1, year_begin, year_end, month)
    df2 = query_climate_database(country2, year_begin, year_end, month)
    # count how many observations each station has
    df1["obs"] = df1.groupby(["NAME"])["NAME"].transform('count')
    df2["obs"] = df2.groupby(["NAME"])["NAME"].transform('count')
    # filter out stations with observations fewer than min_obs
    df1_plot = df1[df1["obs"] >= min_obs]
    df2_plot = df2[df2["obs"] >= min_obs]
    # get lists of stations
    stations1 = df1_plot.NAME.unique()
    stations2 = df2_plot.NAME.unique()
    # randomly choose 3 stations from each country
    stations1 = stations1[np.random.randint(low=1, high=len(stations1), size=(3, 1))].squeeze()
    stations2 = stations2[np.random.randint(low=1, high=len(stations2), size=(3, 1))].squeeze()
    # select rows that contain info for the 3 stations
    df1_plot = df1_plot[df1_plot["NAME"].isin(stations1)]
    df2_plot = df2_plot[df2_plot["NAME"].isin(stations2)]
    # concatenate the two dataframes
    df_plot = pd.concat([df1_plot, df2_plot])
    # convert month from integer to its corresponding name (e.g. 1-->January)
    month_name = datetime.datetime.strptime(str(month), "%m")
    month_name = month_name.strftime("%B")
    # plotting    
    fig = px.histogram(df_plot, 
                       x = "Temp", 
                       color = "NAME",
                       barmode='stack',
                      facet_col = "Country", 
                       title = f"Temperatures in {month_name} between {year_begin} and {year_end} at 6 stations in {country1} and {country2}",
                       **kwargs)
    return(fig)
```


```python
fig2 = tempdist("India", "Algeria", 1980, 2020, 1, 
               min_obs = 10, nbins = 30, width = 1000, height = 300, opacity = 0.5)
# reduce whitespace
fig2.update_layout(margin={"r":0,"t":50,"l":0,"b":0})
# show the plot
fig2.show()
```


<div>                            <div id="1bbf44e5-0fbc-4bb0-b7e3-840def920e0a" class="plotly-graph-div" style="height:300px; width:1000px;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("1bbf44e5-0fbc-4bb0-b7e3-840def920e0a")) {                    Plotly.newPlot(                        "1bbf44e5-0fbc-4bb0-b7e3-840def920e0a",                        [{"alignmentgroup":"True","bingroup":"x","hovertemplate":"NAME=GADAG<br>Country=India<br>Temp=%{x}<br>count=%{y}<extra></extra>","legendgroup":"GADAG","marker":{"color":"#636efa","opacity":0.5,"pattern":{"shape":""}},"name":"GADAG","nbinsx":30,"offsetgroup":"GADAG","orientation":"v","showlegend":true,"type":"histogram","x":[23.18,22.69,22.96,23.21,23.58,24.11,21.86,23.35,23.07,22.92,23.47,24.1,22.13,22.8,23.03,21.81,23.98,22.0,22.14,24.38,23.49,22.92,23.9,23.11,24.06,22.91,23.5,22.8,22.82,22.77,22.26,23.6,24.16,23.35,22.74,23.84,23.56,23.35,22.75,24.06,23.18,22.69,22.96,23.21,23.58,24.11,21.86,23.35,23.07,22.92,23.47,24.1,22.13,22.8,23.03,21.81,23.98,22.0,22.14,24.38,23.49,22.92,23.9,23.11,24.06,22.91,23.5,22.8,22.82,22.77,22.26,23.6,24.16,23.35,22.74,23.84,23.56,23.35,22.75,24.06],"xaxis":"x","yaxis":"y"},{"alignmentgroup":"True","bingroup":"x","hovertemplate":"NAME=THIRUVANANTHAPURAM<br>Country=India<br>Temp=%{x}<br>count=%{y}<extra></extra>","legendgroup":"THIRUVANANTHAPURAM","marker":{"color":"#EF553B","opacity":0.5,"pattern":{"shape":""}},"name":"THIRUVANANTHAPURAM","nbinsx":30,"offsetgroup":"THIRUVANANTHAPURAM","orientation":"v","showlegend":true,"type":"histogram","x":[27.5,27.13,26.83,27.37,26.98,27.23,27.48,27.93,27.59,26.73,27.32,27.89,26.79,26.9,27.68,28.24,27.08,27.27,28.52,27.34,28.03,27.94,27.85,27.5,27.5,28.45,28.35,27.8,27.35,28.25,27.24,28.45,27.53,27.46,27.05,27.81,27.57,28.04,27.26,27.36,27.84,27.4,27.41,27.85,28.34,27.81,27.31,27.95,27.78,27.5,27.13,26.83,27.37,26.98,27.23,27.48,27.93,27.59,26.73,27.32,27.89,26.79,26.9,27.68,28.24,27.08,27.27,28.52,27.34,28.03,27.94,27.85,27.5,27.5,28.45,28.35,27.8,27.35,28.25,27.24,28.45,27.53,27.46,27.05,27.81,27.57,28.04,27.26,27.36,27.84,27.4,27.41,27.85,28.34,27.81,27.31,27.95,27.78],"xaxis":"x","yaxis":"y"},{"alignmentgroup":"True","bingroup":"x","hovertemplate":"NAME=NEW_DELHI_SAFDARJUN<br>Country=India<br>Temp=%{x}<br>count=%{y}<extra></extra>","legendgroup":"NEW_DELHI_SAFDARJUN","marker":{"color":"#00cc96","opacity":0.5,"pattern":{"shape":""}},"name":"NEW_DELHI_SAFDARJUN","nbinsx":30,"offsetgroup":"NEW_DELHI_SAFDARJUN","orientation":"v","showlegend":true,"type":"histogram","x":[14.14,14.39,14.44,13.31,13.44,13.6,14.0,14.65,14.81,12.55,16.36,12.89,14.33,14.25,14.65,13.4,13.7,13.0,12.91,12.85,14.0,12.35,14.1,12.1,13.5,13.9,14.8,14.3,13.7,15.4,13.7,12.9,13.5,12.5,13.8,12.9,15.35,14.9,14.6,14.05,13.75,14.14,14.39,14.44,13.31,13.44,13.6,14.0,14.65,14.81,12.55,16.36,12.89,14.33,14.25,14.65,13.4,13.7,13.0,12.91,12.85,14.0,12.35,14.1,12.1,13.5,13.9,14.8,14.3,13.7,15.4,13.7,12.9,13.5,12.5,13.8,12.9,15.35,14.9,14.6,14.05,13.75],"xaxis":"x","yaxis":"y"},{"alignmentgroup":"True","bingroup":"x","hovertemplate":"NAME=BOUIRA<br>Country=Algeria<br>Temp=%{x}<br>count=%{y}<extra></extra>","legendgroup":"BOUIRA","marker":{"color":"#ab63fa","opacity":0.5,"pattern":{"shape":""}},"name":"BOUIRA","nbinsx":30,"offsetgroup":"BOUIRA","orientation":"v","showlegend":true,"type":"histogram","x":[8.0,11.15,10.6,8.7,8.69,6.8,8.1,8.0,9.1,6.15,8.65,9.95,9.05,8.5,9.45,8.8,8.1,8.6,10.1,9.6,8.0,11.15,10.6,8.7,8.69,6.8,8.1,8.0,9.1,6.15,8.65,9.95,9.05,8.5,9.45,8.8,8.1,8.6,10.1,9.6],"xaxis":"x2","yaxis":"y2"},{"alignmentgroup":"True","bingroup":"x","hovertemplate":"NAME=BENI_ABBES<br>Country=Algeria<br>Temp=%{x}<br>count=%{y}<extra></extra>","legendgroup":"BENI_ABBES","marker":{"color":"#FFA15A","opacity":0.5,"pattern":{"shape":""}},"name":"BENI_ABBES","nbinsx":30,"offsetgroup":"BENI_ABBES","orientation":"v","showlegend":true,"type":"histogram","x":[11.79,10.94,12.36,8.72,10.57,11.73,12.65,13.69,9.22,10.2,10.26,10.54,12.55,11.15,15.6,13.8,13.3,12.05,9.8,12.9,11.4,11.8,12.55,9.3,9.9,12.3,12.1,14.6,13.5,10.2,12.2,12.8,11.1,14.2,10.4,12.9,11.35,10.65,11.79,10.94,12.36,8.72,10.57,11.73,12.65,13.69,9.22,10.2,10.26,10.54,12.55,11.15,15.6,13.8,13.3,12.05,9.8,12.9,11.4,11.8,12.55,9.3,9.9,12.3,12.1,14.6,13.5,10.2,12.2,12.8,11.1,14.2,10.4,12.9,11.35,10.65],"xaxis":"x2","yaxis":"y2"},{"alignmentgroup":"True","bingroup":"x","hovertemplate":"NAME=TOUGGOURT<br>Country=Algeria<br>Temp=%{x}<br>count=%{y}<extra></extra>","legendgroup":"TOUGGOURT","marker":{"color":"#19d3f3","opacity":0.5,"pattern":{"shape":""}},"name":"TOUGGOURT","nbinsx":30,"offsetgroup":"TOUGGOURT","orientation":"v","showlegend":true,"type":"histogram","x":[9.5,8.1,11.1,7.4,10.1,9.4,10.1,12.61,8.9,9.43,10.2,13.4,12.3,11.0,8.4,11.5,9.6,12.05,8.96,11.77,11.03,11.64,12.88,11.78,10.51,12.21,12.25,10.35,9.5,8.1,11.1,7.4,10.1,9.4,10.1,12.61,8.9,9.43,10.2,13.4,12.3,11.0,8.4,11.5,9.6,12.05,8.96,11.77,11.03,11.64,12.88,11.78,10.51,12.21,12.25,10.35],"xaxis":"x2","yaxis":"y2"}],                        {"annotations":[{"font":{},"showarrow":false,"text":"Country=India","x":0.245,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"},{"font":{},"showarrow":false,"text":"Country=Algeria","x":0.755,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"}],"barmode":"stack","height":300,"legend":{"title":{"text":"NAME"},"tracegroupgap":0},"margin":{"b":0,"l":0,"r":0,"t":50},"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"title":{"text":"Temperatures in January between 1980 and 2020 at 6 stations in India and Algeria"},"width":1000,"xaxis":{"anchor":"y","domain":[0.0,0.49],"title":{"text":"Temp"}},"xaxis2":{"anchor":"y2","domain":[0.51,1.0],"matches":"x","title":{"text":"Temp"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"count"}},"yaxis2":{"anchor":"x2","domain":[0.0,1.0],"matches":"y","showticklabels":false}},                        {"responsive": true}                    ).then(function(){

var gd = document.getElementById('1bbf44e5-0fbc-4bb0-b7e3-840def920e0a');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>

